{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Kirill/Desktop/Individual Project/IndividualProject2022/FrontEnd/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Kirill/Desktop/Individual Project/IndividualProject2022/FrontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/Kirill/Desktop/Individual Project/IndividualProject2022/FrontEnd/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Kirill/Desktop/Individual Project/IndividualProject2022/FrontEnd/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/Kirill/Desktop/Individual Project/IndividualProject2022/FrontEnd/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Kirill/Desktop/Individual Project/IndividualProject2022/FrontEnd/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import axios from\"axios\";import'./Community.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var queryString=window.location.search;var urlParams=new URLSearchParams(queryString);var community_name=urlParams.get('c');var username=localStorage.getItem(\"username\");var Community=/*#__PURE__*/function(_Component){_inherits(Community,_Component);var _super=_createSuper(Community);function Community(){var _this;_classCallCheck(this,Community);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={posts:[],members:[]};_this.getAllPosts=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios.get(\"http://127.0.0.1:8081/community\",{headers:{\"Content-Type\":\"application/json\"},params:{\"community\":community_name}}).then(function(res){_this.setState({posts:res.data.posts});_this.setState({members:res.data.members});});case 1:case\"end\":return _context.stop();}}},_callee);}));_this.handleJoin=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:axios.get(\"http://127.0.0.1:8081/c-join\",{headers:{\"Content-Type\":\"application/json\"},params:{\"community\":community_name,\"username\":username}}).then(function(res){window.location.reload(false);});case 1:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleLeave=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:axios.get(\"http://127.0.0.1:8081/c-leave\",{headers:{\"Content-Type\":\"application/json\"},params:{\"community\":community_name,\"username\":username}}).then(function(res){window.location.reload(false);});case 1:case\"end\":return _context3.stop();}}},_callee3);}));_this.handleLike=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(post_id){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:axios.get(\"http://127.0.0.1:8081/p-like\",{headers:{\"Content-Type\":\"application/json\"},params:{\"post_id\":post_id,\"community\":community_name,\"username\":username}}).then(function(res){window.location.reload(false);});case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x){return _ref4.apply(this,arguments);};}();_this.handleComment=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(post_id){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:window.location=\"/comments?p=\"+post_id;case 1:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x2){return _ref5.apply(this,arguments);};}();return _this;}_createClass(Community,[{key:\"componentDidMount\",value:function componentDidMount(){this.getAllPosts();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"top\",children:[/*#__PURE__*/_jsx(\"h1\",{children:community_name}),/*#__PURE__*/_jsx(\"p\",{children:this.state.members.includes(username)?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this2.handleLeave(community_name);},children:\"Leave\"}):/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this2.handleJoin(community_name);},children:\"Join\"})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Users:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"users\",children:/*#__PURE__*/_jsx(\"ul\",{children:this.state.members.map(function(member){return/*#__PURE__*/_jsx(\"li\",{children:member},member);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"posts\",children:this.state.posts.map(function(post){return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsx(\"h2\",{children:post.title}),/*#__PURE__*/_jsx(\"h2\",{children:post.creator}),/*#__PURE__*/_jsx(\"h2\",{children:post.content}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Likes: \",post.likes]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Comments: \",post.n_comments]}),/*#__PURE__*/_jsx(\"h2\",{children:post.date}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this2.handleLike(post._id);},children:\"Like\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this2.handleComment(post._id);},children:\"Comment\"})]})]},post._id);})})]});}}]);return Community;}(Component);export default Community;","map":{"version":3,"names":["React","Component","axios","queryString","window","location","search","urlParams","URLSearchParams","community_name","get","username","localStorage","getItem","Community","state","posts","members","getAllPosts","headers","params","then","res","setState","data","handleJoin","reload","handleLeave","handleLike","post_id","handleComment","includes","map","member","post","title","creator","content","likes","n_comments","date","_id"],"sources":["C:/Users/Kirill/Desktop/Individual Project/IndividualProject2022/FrontEnd/src/Components/Community.js"],"sourcesContent":["import React, { Component} from \"react\";\r\nimport axios from \"axios\";\r\nimport './Community.css';\r\n\r\nconst queryString = window.location.search;\r\nconst urlParams = new URLSearchParams(queryString);\r\nconst community_name = urlParams.get('c');\r\nconst username = localStorage.getItem(\"username\") ;\r\n\r\nclass Community extends Component {\r\n\tstate = {posts: [],\r\n    members:[] };\r\n\r\n        \r\n    componentDidMount() {\r\n    this.getAllPosts();\r\n    }\r\n    \r\n    getAllPosts = async () => {\r\n\t\taxios.get(\"http://127.0.0.1:8081/community\", {headers: {\"Content-Type\": \"application/json\"}, params: {\"community\": community_name}})\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.setState({ posts: res.data.posts });\r\n                this.setState({ members: res.data.members});\r\n\t\t\t});\r\n\t};\r\n\r\n    handleJoin = async () => {\r\n        axios.get(\"http://127.0.0.1:8081/c-join\", {headers: {\"Content-Type\": \"application/json\"}, params: {\"community\":community_name, \"username\":username}})\r\n\t\t\t.then((res) => {\r\n\t\t\t\twindow.location.reload(false);\r\n\t\t\t});\r\n\t};\r\n\r\n    handleLeave = async () => {\r\n     axios.get(\"http://127.0.0.1:8081/c-leave\", {headers: {\"Content-Type\": \"application/json\"}, params: {\"community\":community_name, \"username\":username}})\r\n\t\t\t.then((res) => {\r\n\t\t\t\twindow.location.reload(false);\r\n\t\t\t});\r\n\t};\r\n\r\n    handleLike = async (post_id) => {\r\n\t\taxios.get(\"http://127.0.0.1:8081/p-like\", {headers: {\"Content-Type\": \"application/json\"}, params: {\"post_id\":post_id,\"community\":community_name, \"username\":username}})\r\n\t\t\t.then((res) => {\r\n\t\t\t\twindow.location.reload(false);\r\n\t\t\t});\r\n\t};\r\n\r\n    handleComment = async (post_id) => {\r\n\t\twindow.location = \"/comments?p=\"+post_id;\r\n\t};\r\n\r\n\trender()  {\r\n\t\treturn (\r\n\t\t\t<div className = \"top\">\r\n                    <h1>{community_name}</h1>\r\n                    <p>\r\n                            {(this.state.members.includes(username))?(<button onClick={() => this.handleLeave(community_name)}>Leave</button>):(<button onClick={() => this.handleJoin(community_name)}>Join</button>)}\r\n                    </p>\r\n                    <h3>Users:</h3>\r\n                    <div className=\"users\">\r\n                        <ul>\r\n                            {this.state.members.map((member) => (\r\n                                <li key={member}>{member}</li>\r\n                        ))}\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"posts\">\r\n                        {this.state.posts.map((post) => (\r\n                            <div className=\"post\" key={post._id}>\r\n                                <h2>{post.title}</h2>\r\n                                <h2>{post.creator}</h2>\r\n                                <h2>{post.content}</h2>\r\n                                <h2>Likes: {post.likes}</h2>\r\n                                <h2>Comments: {post.n_comments}</h2>\r\n                                <h2>{post.date}</h2>\r\n                                <p>\r\n                                    <button onClick={() => this.handleLike(post._id)}>Like</button>\r\n                                    <button onClick={() => this.handleComment(post._id)}>Comment</button>\r\n                                </p>\r\n                            </div>\r\n                        ))}\r\n\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Community;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}